<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <title>Preview â€¢ Pico CSS</title>
    <meta name="description" content="A pure HTML example, without dependencies.">

    <!-- Pico.css -->
    <link rel="stylesheet" href="pico.min.css">
    <link rel="stylesheet" href="widgets/navbar.css">
    <link rel="stylesheet" href="widgets/display-overview.css">
    <link rel="stylesheet" href="style.css">
</head>

<body>
<!-- Load the navigation bar -->
<div id="navbar"></div>
<script src="widgets/navbar.js"></script>

<div id="body-content">
    <h2>Connected Displays</h2>

    <label id="tet">tet</label>
    <label id="tet2">tet</label>

    <div class="grid">
        <div class="grid">
            <!-- Load display 1 -->
            <div class="display-overview"></div>
            <script src="widgets/display-overview.js"></script>

            <!-- Load display 2 -->
            <div class="display-overview"></div>
            <script src="widgets/display-overview.js"></script>
        </div>
    </div>
</div>

<script>
    var gateway = `ws://${window.location.hostname}/ws`;
    var websocket;

    function initWebSocket() {
        websocket = new WebSocket(gateway);
        websocket.onmessage = onMessage;
    }

    function onMessage(event) {
        console.log("Server Push: " + event.data);
        var data = JSON.parse(event.data);

        // Test
        document.getElementById('tet').innerHTML = data.test
        document.getElementById('tet2').innerHTML = data.test2
    }

    window.addEventListener('load', initWebSocket);
</script>

</body>
</html>